{"ast":null,"code":"import _classCallCheck from \"c:\\\\$VLC\\\\dnd-init-tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"c:\\\\$VLC\\\\dnd-init-tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"c:\\\\$VLC\\\\dnd-init-tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"c:\\\\$VLC\\\\dnd-init-tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"c:\\\\$VLC\\\\dnd-init-tracker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"c:\\\\$VLC\\\\dnd-init-tracker\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport FlipMove from 'react-flip-move';\nimport store from 'store2';\nimport mousetrap from 'mousetrap';\nimport './App.css';\nimport Button from './components/Button';\nimport Card from './Card';\nimport { randomId, updateListElement } from './utils';\nimport { initialState } from './constants';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.nextTurn = function () {\n      var _this$state = _this.state,\n          elements = _this$state.elements,\n          current = _this$state.current;\n      var val = current === elements.length - 1 ? 0 : current + 1;\n\n      _this.setState({\n        current: val\n      });\n\n      _this.syncStateWithLocalStore();\n    };\n\n    _this.syncStateWithLocalStore = function () {\n      store.set('dnd-data', _this.state);\n    };\n\n    _this.updateField = function (id, e, field) {\n      var value = e.target.value;\n\n      _this.setState({\n        elements: updateListElement(_this.state.elements, id, field, value)\n      });\n\n      _this.syncStateWithLocalStore();\n    };\n\n    _this.updateInitiative = function (id, e) {\n      clearTimeout(_this.timeout_);\n\n      _this.updateField(id, e, 'initiative');\n\n      _this.timeout_ = setTimeout(function () {\n        return _this.sortElements();\n      }, 500);\n\n      _this.syncStateWithLocalStore();\n    };\n\n    _this.sortElements = function () {\n      var elements = _this.state.elements;\n\n      _this.setState({\n        elements: elements.sort(function (l, r) {\n          return r.initiative - l.initiative;\n        })\n      });\n\n      _this.syncStateWithLocalStore();\n    };\n\n    _this.addCard = function () {\n      var elements = _this.state.elements;\n      elements[elements.length] = {\n        id: randomId(),\n        name: \"Player \".concat(elements.length + 1),\n        initiative: -100,\n        hitpoints: 12\n      };\n\n      _this.setState({\n        elements: elements.sort(function (l, r) {\n          return r.initiative - l.initiative;\n        })\n      });\n\n      _this.syncStateWithLocalStore();\n    };\n\n    _this.removeElement = function (id) {\n      var elements = _this.state.elements;\n      elements = elements.filter(function (el) {\n        return el.id !== id;\n      });\n\n      _this.setState({\n        elements: elements\n      });\n\n      _this.syncStateWithLocalStore();\n    };\n\n    _this.state = {\n      elements: [],\n      current: 0\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var storeDate = store.get('dnd-data');\n\n      if (storeDate) {\n        this.setState(storeDate);\n      } else {\n        this.setState({\n          elements: initialState,\n          current: 0\n        });\n      }\n\n      mousetrap.bind(['command+k', 'ctrl+k'], function () {\n        console.log('called.');\n\n        _this2.nextTurn();\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      mousetrap.unbind('command+k');\n      mousetrap.unbind('ctrl+k');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          elements = _this$state2.elements,\n          current = _this$state2.current;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.addCard,\n        label: \"Add New Card\",\n        bold: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(FlipMove, {\n        duration: 240,\n        delay: 0,\n        staggerDurationBy: 260,\n        staggerDelayBy: 0,\n        easing: \"cubic-bezier(0.13, 1.15, 0.8, 1.5)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, elements.map(function (element, index) {\n        return React.createElement(Card, {\n          key: element.id,\n          element: element,\n          onUpdateField: _this3.updateField,\n          onInitiativeChange: _this3.updateInitiative,\n          onRemove: _this3.removeElement,\n          isCurrent: index === current,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["c:\\$VLC\\dnd-init-tracker\\src\\App.js"],"names":["React","Component","FlipMove","store","mousetrap","Button","Card","randomId","updateListElement","initialState","App","props","nextTurn","state","elements","current","val","length","setState","syncStateWithLocalStore","set","updateField","id","e","field","value","target","updateInitiative","clearTimeout","timeout_","setTimeout","sortElements","sort","l","r","initiative","addCard","name","hitpoints","removeElement","filter","el","storeDate","get","bind","console","log","unbind","map","element","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FlipMove from 'react-flip-move';\nimport store from 'store2';\nimport mousetrap from 'mousetrap';\nimport './App.css';\nimport Button from './components/Button';\nimport Card from './Card';\nimport { randomId, updateListElement } from './utils';\nimport { initialState } from './constants';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { elements: [], current: 0 };\n  }\n\n  componentDidMount() {\n    const storeDate = store.get('dnd-data');\n    if (storeDate) {\n      this.setState(storeDate);\n    } else {\n      this.setState({ elements: initialState, current: 0 });\n    }\n    mousetrap.bind(['command+k', 'ctrl+k'], () => {\n      console.log('called.');\n      this.nextTurn()\n    })\n  };\n\n  componentWillUnmount() {\n    mousetrap.unbind('command+k');\n    mousetrap.unbind('ctrl+k');\n  };\n\n  nextTurn = () => {\n    const { elements, current } = this.state;\n    const val = current === elements.length - 1 ? 0 : current + 1;\n    this.setState({ current: val });\n    this.syncStateWithLocalStore();\n  };\n\n  syncStateWithLocalStore = () => {\n    store.set('dnd-data', this.state);\n  };\n\n  updateField = (id, e, field) => {\n    const { value } = e.target;\n    this.setState({\n      elements: updateListElement(this.state.elements, id, field, value)\n    });\n    this.syncStateWithLocalStore();\n  };\n\n  updateInitiative = (id, e) => {\n    clearTimeout(this.timeout_);\n    this.updateField(id, e, 'initiative');\n    this.timeout_ = setTimeout(() => this.sortElements(), 500);\n    this.syncStateWithLocalStore();\n  };\n\n  sortElements = () => {\n    const { elements } = this.state;\n    this.setState({\n      elements: elements.sort((l, r) => r.initiative - l.initiative)\n    });\n    this.syncStateWithLocalStore();\n  };\n\n  addCard = () => {\n    const { elements } = this.state;\n    elements[elements.length] = {\n      id: randomId(),\n      name: `Player ${elements.length + 1}`,\n      initiative: -100,\n      hitpoints: 12,\n    };\n    this.setState({\n      elements: elements.sort((l, r) => r.initiative - l.initiative)\n    });\n    this.syncStateWithLocalStore();\n  };\n\n  removeElement = (id) => {\n    let { elements } = this.state;\n    elements = elements.filter(el => el.id !== id);\n    this.setState({ elements });\n    this.syncStateWithLocalStore();\n  };\n\n  render() {\n    const { elements, current } = this.state;\n    return (\n      <div>\n        <div className=\"header\">\n          <Button\n            onClick={this.addCard}\n            label=\"Add New Card\"\n            bold\n          />\n        </div>\n        <FlipMove\n          duration={240}\n          delay={0}\n          staggerDurationBy={260}\n          staggerDelayBy={0}\n          easing=\"cubic-bezier(0.13, 1.15, 0.8, 1.5)\"\n        >\n          {elements.map((element, index) =>\n            <Card\n              key={element.id}\n              element={element}\n              onUpdateField={this.updateField}\n              onInitiativeChange={this.updateInitiative}\n              onRemove={this.removeElement}\n              isCurrent={index === current}\n            />\n          )}\n        </FlipMove>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}